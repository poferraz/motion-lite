import{h as O,j as t}from"./index-CUvJq98-.js";import{r as l}from"./vendor-nf7bT_Uh.js";function R({sessionNames:j,initialSelectedSessions:f,onContinue:y,onBack:N,onReplaceCSV:D}){const[r,x]=l.useState(f),[n,z]=l.useState(null),[o,u]=l.useState(null),[g,m]=l.useState(!1),h=l.useRef(null);l.useEffect(()=>{x(f)},[f]);const p=l.useMemo(()=>new Set(r),[r]),v=l.useMemo(()=>j.filter(e=>!p.has(e)),[j,p]);l.useEffect(()=>{const e=document.createElement("div");return e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="1px",e.style.height="1px",e.style.opacity="0",document.body.appendChild(e),h.current=e,()=>{e.remove(),h.current=null}},[]);const S=(e,s)=>{z(s),e.dataTransfer.setData("text/plain",String(s)),h.current&&e.dataTransfer.setDragImage(h.current,0,0),e.dataTransfer.effectAllowed="move"},C=(e,s)=>{if(e.preventDefault(),n===null)return;const i=e.currentTarget.getBoundingClientRect(),c=i.top+i.height/2,d=e.clientY>c;u(s),m(d),e.dataTransfer.dropEffect="move"},k=e=>{const s=e.relatedTarget;e.currentTarget.contains(s)||(u(null),m(!1))},T=e=>{n!==null&&e.target===e.currentTarget&&(e.preventDefault(),e.dataTransfer.dropEffect="move",u(null),m(!1))},E=e=>{if(e.preventDefault(),n===null){b();return}let s;if(o===null?s=r.length:s=g?o+1:o,s===n||s===n+1){b();return}const a=[...r],[i]=a.splice(n,1),c=n<s?s-1:s;a.splice(c,0,i),x(a),b()},b=()=>{z(null),u(null),m(!1)},w=l.useCallback(e=>{const s=p.has(e);x(s?r.filter(a=>a!==e):[...r,e])},[r,p]);return O()?t.jsx("div",{className:"flex-1 flex flex-col p-4",children:t.jsxs("div",{className:"max-w-md mx-auto w-full",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Select and Order Sessions"}),t.jsx("p",{className:"text-zinc-400 text-sm",children:"Choose sessions and drag to reorder them"})]}),t.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-2xl mb-4",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-zinc-800 text-sm font-medium text-white",id:"available-sessions-label",children:["Available Sessions (",v.length,")"]}),t.jsx("div",{className:"p-6 space-y-2 max-h-52 overflow-auto",role:"listbox","aria-labelledby":"available-sessions-label",children:v.length===0?t.jsx("div",{className:"text-sm text-zinc-500 px-2 py-3 text-center",children:"All sessions selected"}):v.map(e=>t.jsx("button",{type:"button",onClick:()=>w(e),className:"w-full text-left px-3 py-2.5 rounded-lg border border-zinc-700 hover:bg-zinc-800 active:bg-zinc-700 transition text-sm text-white hover:text-white","data-pressable":!0,children:e},e))})]}),t.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-2xl mb-6",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-zinc-800 text-sm font-medium text-white",children:["Selected Order (",r.length,")"]}),t.jsxs("div",{className:"p-6 space-y-2 max-h-64 overflow-auto",onDragOver:T,onDragLeave:k,onDrop:E,children:[r.length===0?t.jsx("div",{className:"text-sm text-zinc-500 px-2 py-3 text-center",children:"Pick from the list above to build today"}):r.map((e,s)=>{const a=n===s,i=o===s&&!g,c=o===s&&g;return t.jsxs("div",{className:"relative",children:[i&&t.jsx("div",{className:"absolute -top-1 left-0 right-0 h-0.5 bg-purple-500 rounded-full pointer-events-none z-10"}),t.jsx("div",{draggable:!0,onDragStart:d=>S(d,s),onDragEnd:b,onDragOver:d=>C(d,s),className:["px-3 py-2 rounded-lg border border-zinc-700 bg-zinc-800 transition shadow-sm",a?"opacity-50":"hover:bg-zinc-700"].join(" "),title:"Drag to reorder",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"cursor-grab select-none text-zinc-400",children:"⋮⋮"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-sm font-medium truncate text-white",children:e}),t.jsxs("div",{className:"text-xs text-zinc-400",children:["Position ",s+1," of ",r.length]})]}),t.jsx("button",{type:"button",onClick:()=>w(e),className:"text-xs px-2 py-1 rounded-md border border-zinc-600 hover:bg-zinc-700 flex-shrink-0 text-zinc-300 hover:text-white","data-pressable":!0,children:"Remove"})]})}),c&&t.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-0.5 bg-purple-500 rounded-full pointer-events-none z-10"})]},e)}),n!==null&&o===null&&r.length>0&&t.jsx("div",{className:"h-3 relative",children:t.jsx("div",{className:"absolute top-1 left-0 right-0 h-0.5 bg-purple-500 rounded-full pointer-events-none"})})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:N,className:"flex-1 px-4 py-3 border border-zinc-700 text-sm font-medium rounded-xl text-zinc-400 bg-zinc-800 hover:bg-zinc-700 hover:text-white transition-colors","data-pressable":!0,children:"Back"}),t.jsxs("button",{onClick:()=>y(r),disabled:r.length===0,className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 disabled:from-zinc-600 disabled:to-zinc-600 disabled:cursor-not-allowed text-white text-sm font-medium rounded-xl transition-all duration-200 shadow-lg shadow-blue-500/30","aria-disabled":r.length===0,"data-pressable":!0,children:["Start Workout (",r.length,")"]})]}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("button",{onClick:D,className:"text-sm text-purple-400 hover:text-purple-300 transition-colors","aria-label":"Replace CSV data","data-pressable":!0,children:"Replace CSV"})})]})}):t.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-zinc-900 rounded-2xl border border-zinc-800 p-6 text-center max-w-sm",children:[t.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"No CSV Loaded"}),t.jsx("p",{className:"text-zinc-400 mb-6",children:"Upload a CSV first."}),t.jsx("button",{onClick:N,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg shadow-blue-500/30",children:"Go to Landing"})]})})}export{R as default};
